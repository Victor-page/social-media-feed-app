(this["webpackJsonpredux-essentials-example"]=this["webpackJsonpredux-essentials-example"]||[]).push([[0],{1317:function(t,e){},1319:function(t,e,n){"use strict";n.r(e);var r=n(81),s=n(8),a=n.n(s),o=n(3),c=n.n(o),i=n(74),u=n.n(i),d=(n(143),n(30)),j=n(12),l=n(4),p=function(){return Object(l.jsx)("nav",{children:Object(l.jsx)("section",{children:Object(l.jsxs)("div",{className:"navContent",children:[Object(l.jsx)("div",{className:"navLinks"}),Object(l.jsx)(d.b,{to:"/",children:"Posts"})]})})})},b=n(11),O=n(15),m=n(22),f=n(38),h=[{id:"1",title:"First Post!",content:"Hello!",user:"0",date:Object(f.a)(new Date,{minutes:10}).toISOString(),reactions:{thumbsUp:0,hooray:0,heart:0,rocket:0,eyes:0}},{id:"2",title:"Second Post!",content:"More text",user:"2",date:Object(f.a)(new Date,{minutes:5}).toISOString(),reactions:{thumbsUp:0,hooray:0,heart:0,rocket:0,eyes:0}}],x=Object(m.b)({name:"posts",initialState:h,reducers:{postAdded:{reducer:function(t,e){t.push(e.payload)},prepare:function(t,e,n){return{payload:{id:Object(m.c)(),title:t,content:e,user:n,date:(new Date).toISOString()}}}},postUpdated:function(t,e){var n=e.payload,r=n.id,s=n.title,a=n.content,o=t.find((function(t){return t.id===r}));o&&(o.title=s,o.content=a)},reactionAdded:function(t,e){var n=e.payload,r=n.postId,s=n.reaction,a=t.find((function(t){return t.id===r}));a&&a.reactions[s]++}}}),v=x.reducer,y=x.actions,g=y.postAdded,S=y.postUpdated,I=y.reactionAdded,w=v,N=function(){var t=Object(o.useState)(""),e=Object(b.a)(t,2),n=e[0],r=e[1],s=Object(o.useState)(""),a=Object(b.a)(s,2),c=a[0],i=a[1],u=Object(o.useState)(""),d=Object(b.a)(u,2),j=d[0],p=d[1],m=Object(O.b)(),f=Object(O.c)((function(t){return t.userList})),h=Boolean(n)&&Boolean(c)&&Boolean(j),x=f.map((function(t){var e=t.id,n=t.name;return Object(l.jsx)("option",{value:e,children:n},e)}));return Object(l.jsxs)("section",{children:[Object(l.jsx)("h2",{children:"Add a New Post"}),Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),n&&c&&m(g(n,c,j)),r(""),i("")},children:[Object(l.jsx)("label",{htmlFor:"postTitle",children:"Post Title:"}),Object(l.jsx)("input",{type:"text",id:"postTitle",name:"postTitle",value:n,onChange:function(t){var e=t.target;return r(e.value)}}),Object(l.jsx)("label",{htmlFor:"postAuthor",children:"Author:"}),Object(l.jsxs)("select",{id:"postAuthor",value:j,onChange:function(t){var e=t.target;return p(e.value)},children:[Object(l.jsx)("option",{value:""}),x]}),Object(l.jsx)("label",{htmlFor:"postContent",children:"Post:"}),Object(l.jsx)("textarea",{type:"text",id:"postContent",name:"postContent",value:c,onChange:function(t){var e=t.target;return i(e.value)}}),Object(l.jsx)("button",{type:"submit",disabled:!h,children:"Save Post"})]})]})},k=function(t){var e=t.userId,n=Object(O.c)((function(t){return t.userList.find((function(t){return t.id===e}))}));return Object(l.jsxs)("span",{children:["by ",n?n.name:"Unknown author"]})},A={thumbsUp:"\ud83d\udc4d",hooray:"\ud83c\udf89",heart:"\u2764\ufe0f",rocket:"\ud83d\ude80",eyes:"\ud83d\udc40"},C=function(t){var e=t.post,n=Object(O.b)(),r=function(t,e){return n(I({postId:t,reaction:e}))},s=Object.entries(A).map((function(t){var n=Object(b.a)(t,2),s=n[0],a=n[1];return Object(l.jsxs)("button",{type:"button",className:"muted-button reaction-button",onClick:r.bind(null,e.id,s),children:[a," ",e.reactions[s]]},s)}));return Object(l.jsx)("div",{children:s})},P=n(104),T=n(105),F=function(t){var e=t.timestamp,n="";if(e){var r=Object(P.a)(e),s=Object(T.a)(r);n="".concat(s," ago")}return Object(l.jsxs)("span",{title:e,children:["\xa0 ",Object(l.jsx)("i",{children:n})]})},D=function(){var t=Object(O.c)((function(t){return t.postList})).slice().sort((function(t,e){return e.date.localeCompare(t.date)})).map((function(t){var e=t.id,n=t.title,r=t.content,s=t.user,a=t.date;return Object(l.jsxs)("article",{className:"post-excerpt",children:[Object(l.jsx)("h3",{children:n}),Object(l.jsxs)("div",{children:[Object(l.jsx)(k,{userId:s}),Object(l.jsx)(F,{timestamp:a})]}),Object(l.jsx)("p",{className:"post-content",children:r.substring(0,100)}),Object(l.jsx)(C,{post:t}),Object(l.jsx)(d.b,{to:"/posts/".concat(e),className:"button muted-button",children:"View Post"})]},e)}));return Object(l.jsxs)("section",{className:"post-list",children:[Object(l.jsx)("h2",{children:"Posts"}),t]})},L=function(t){var e=t.match.params.postId,n=Object(O.c)((function(t){return t.postList.find((function(t){return t.id===e}))})),r=n.user,s=n.id,a=n.title,o=n.content,c=n.date;return n?Object(l.jsx)("section",{children:Object(l.jsxs)("article",{className:"post",children:[Object(l.jsx)("h2",{children:a}),Object(l.jsxs)("div",{children:[Object(l.jsx)(k,{userId:r}),Object(l.jsx)(F,{timestamp:c})]}),Object(l.jsx)("p",{className:"post-content",children:o}),Object(l.jsx)(C,{post:n}),Object(l.jsx)(d.b,{to:"/edit-post/".concat(s),className:"button",children:"Edit Post"})]})}):Object(l.jsx)("section",{children:Object(l.jsx)("h2",{children:"Post not found!"})})},M=function(t){var e=t.match.params.postId,n=Object(O.c)((function(t){return t.postList.find((function(t){return t.id===e}))})),r=Object(o.useState)(n.title),s=Object(b.a)(r,2),a=s[0],c=s[1],i=Object(o.useState)(n.content),u=Object(b.a)(i,2),d=u[0],p=u[1],m=Object(O.b)(),f=Object(j.g)();return Object(l.jsxs)("section",{children:[Object(l.jsx)("h2",{children:"Edit Post"}),Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),a&&d&&(m(S({id:e,content:d,title:a})),f.push("/posts/".concat(e)))},children:[Object(l.jsx)("label",{htmlFor:"postTitle",children:"Post Title:"}),Object(l.jsx)("input",{type:"text",id:"postTitle",name:"postTitle",placeholder:"What's on your mind?",value:a,onChange:function(t){return c(t.target.value)}}),Object(l.jsx)("label",{htmlFor:"postContent",children:"Content:"}),Object(l.jsx)("textarea",{id:"postContent",name:"postContent",value:d,onChange:function(t){return p(t.target.value)}}),Object(l.jsx)("button",{type:"submit",children:"Save Post"})]})]})};var U,q=function(){return Object(l.jsxs)(d.a,{children:[Object(l.jsx)(p,{}),Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(j.d,{children:[Object(l.jsx)(j.b,{exact:!0,path:"/",render:function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(N,{}),Object(l.jsx)(D,{})]})}}),Object(l.jsx)(j.b,{exact:!0,path:"/posts/:postId",component:L}),Object(l.jsx)(j.b,{exact:!0,path:"/edit-post/:postId",component:M}),Object(l.jsx)(j.a,{to:"/"})]})})]})},J=Object(m.b)({name:"users",initialState:[{id:"0",name:"Tianna Jenkins"},{id:"1",name:"Kevin Grant"},{id:"2",name:"Madison Price"}],reducers:{}}).reducer,K=Object(m.a)({reducer:{postList:w,userList:J}}),B=n(39),E=n(52),R=n(132),W=n(40),G=n(28),H=n(80),V=n(23),z=n(32),Q=n.n(z),X=n(103),Y=n.n(X),Z=n(136),$=n(137),_=["id"],tt=2e3,et=Y()(),nt=localStorage.getItem("randomTimestampSeed");function rt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(et()*(e-t+1))+t}nt?U=new Date(nt):(nt=(U=new Date).toISOString(),localStorage.setItem("randomTimestampSeed",nt)),et=Y()(nt),Object($.setRandom)(et),Q.a.seed(U.getTime());for(var st,at=function(t){return t[rt(0,t.length-1)]},ot=Object(V.factory)({user:{id:Object(V.primaryKey)(m.c),firstName:String,lastName:String,name:String,username:String,posts:Object(V.manyOf)("post")},post:{id:Object(V.primaryKey)(m.c),title:String,date:String,content:String,reactions:Object(V.oneOf)("reaction"),comments:Object(V.manyOf)("comment"),user:Object(V.oneOf)("user")},comment:{id:Object(V.primaryKey)(String),date:String,text:String,post:Object(V.oneOf)("post")},reaction:{id:Object(V.primaryKey)(m.c),thumbsUp:Number,hooray:Number,heart:Number,rocket:Number,eyes:Number,post:Object(V.oneOf)("post")}}),ct=function(){var t=Q.a.name.firstName(),e=Q.a.name.lastName();return{firstName:t,lastName:e,name:"".concat(t," ").concat(e),username:Q.a.internet.userName()}},it=0;it<3;it++)for(var ut=ot.user.create(ct()),dt=0;dt<3;dt++){var jt=(st=ut,{title:Q.a.lorem.words(),date:Q.a.date.recent(7).toISOString(),user:st,content:Q.a.lorem.paragraphs(),reactions:ot.reaction.create()});ot.post.create(jt)}var lt=function(t){return Object(W.a)(Object(W.a)({},t),{},{user:t.user.id})},pt=[G.e.get("/fakeApi/posts",(function(t,e,n){var r=ot.post.getAll().map(lt);return e(n.delay(tt),n.json(r))})),G.e.post("/fakeApi/posts",(function(t,e,n){var r=t.body;if("error"===r.content)return e(n.delay(tt),n.status(500),n.json("Server error saving this post!"));r.date=(new Date).toISOString();var s=ot.user.findFirst({where:{id:{equals:r.user}}});r.user=s,r.reactions=ot.reaction.create();var a=ot.post.create(r);return e(n.delay(tt),n.json(lt(a)))})),G.e.get("/fakeApi/posts/:postId",(function(t,e,n){var r=ot.post.findFirst({where:{id:{equals:t.params.postId}}});return e(n.delay(tt),n.json(lt(r)))})),G.e.patch("/fakeApi/posts/:postId",(function(t,e,n){var r=t.body,s=(r.id,Object(R.a)(r,_)),a=ot.post.update({where:{id:{equals:t.params.postId}},data:s});return e(n.delay(tt),n.json(lt(a)))})),G.e.get("/fakeApi/posts/:postId/comments",(function(t,e,n){var r=ot.post.findFirst({where:{id:{equals:t.params.postId}}});return e(n.delay(tt),n.json({comments:r.comments}))})),G.e.post("/fakeApi/posts/:postId/reactions",(function(t,e,n){var r=t.params.postId,s=t.body.reaction,a=ot.post.findFirst({where:{id:{equals:r}}}),o=ot.post.update({where:{id:{equals:r}},data:{reactions:Object(W.a)(Object(W.a)({},a.reactions),{},Object(E.a)({},s,a.reactions[s]+=1))}});return e(n.delay(tt),n.json(lt(o)))})),G.e.get("/fakeApi/notifications",(function(t,e,n){var r=ht(void 0,rt(1,5),ot);return e(n.delay(tt),n.json(r))})),G.e.get("/fakeApi/users",(function(t,e,n){return e(n.delay(tt),n.json(ot.user.getAll()))}))],bt=H.setupWorker.apply(void 0,pt),Ot=new Z.Server("ws://localhost"),mt=function(t,e){!function(t,e){t.send(JSON.stringify(e))}(t,{type:"notifications",payload:ht(e,rt(1,5),ot)})};Ot.on("connection",(function(t){t,t.on("message",(function(e){var n=JSON.parse(e);if("notifications"===n.type){var r=n.payload;mt(t,r)}}))}));var ft=["poked you","says hi!","is glad we're friends","sent you a gift"];function ht(t,e,n){var r,s=new Date;t?r=Object(P.a)(t):(r=new Date(s.valueOf())).setMinutes(r.getMinutes()-15);var a=Object(B.a)(Array(e)).map((function(){var t=at(n.user.getAll()),e=at(ft);return{id:Object(m.c)(),date:Q.a.date.between(r,s).toISOString(),message:e,user:t.id}}));return a}function xt(){return(xt=Object(r.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.start({onUnhandledRequest:"bypass"});case 2:u.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(O.a,{store:K,children:Object(l.jsx)(q,{})})}),document.getElementById("root"));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){xt.apply(this,arguments)}()},143:function(t,e,n){}},[[1319,1,2]]]);
//# sourceMappingURL=main.3280ea2c.chunk.js.map